# ============================================================
# CONFIGURAÇÕES DE PERFORMANCE - WHATICKET
# Adicione estas variáveis ao seu .env de produção
# ============================================================

# ===== CONNECTION POOL (POSTGRESQL) =====
# Máximo de conexões simultâneas (default: 20)
DB_POOL_MAX=20
# Mínimo de conexões mantidas (default: 5)
DB_POOL_MIN=5
# Timeout para adquirir conexão em ms (default: 60000)
DB_POOL_ACQUIRE=60000
# Tempo idle antes de liberar conexão em ms (default: 10000)
DB_POOL_IDLE=10000
# Verificar conexões mortas a cada X ms (default: 1000)
DB_POOL_EVICT=1000
# Timeout de conexão inicial em ms (default: 10000)
DB_CONNECT_TIMEOUT=10000
# Timeout de query em ms (default: 90000)
DB_STATEMENT_TIMEOUT=90000

# ===== CACHE REDIS =====
# TTL padrão para cache de queries em segundos (default: 30)
QUERY_CACHE_TTL=30
# Habilitar logs de debug do cache (default: false)
CACHE_DEBUG=false

# ===== SOCKET.IO =====
# Intervalo mínimo entre emissões iguais em ms (default: 300)
SOCKET_THROTTLE_MS=300
# Habilitar logs de debug do socket (default: false)
SOCKET_DEBUG=false
# URL Redis para adapter multi-instância (opcional)
SOCKET_REDIS_URL=

# ===== RATE LIMITING =====
# Máximo de requisições por IP por minuto
RATE_LIMIT_MAX=1000
# Janela de tempo em ms (default: 60000 = 1 minuto)
RATE_LIMIT_WINDOW=60000

# ===== BULL QUEUES (REDIS) =====
# Máximo de jobs processados simultaneamente por fila
REDIS_OPT_LIMITER_MAX=5
# Duração mínima entre jobs em ms
REDIS_OPT_LIMITER_DURATION=1000

# ===== LOGGING =====
# Nível de log: error, warn, info, debug (default: info)
LOG_LEVEL=info
# Desabilitar logs SQL do Sequelize em produção
DB_LOGGING=false

# ============================================================
# DICAS DE PRODUÇÃO:
# 1. Use PM2 em modo cluster: pm2 start server.ts -i max
# 2. Habilite HTTP/2 no proxy reverso (nginx)
# 3. Configure CDN para arquivos estáticos
# 4. Execute VACUUM ANALYZE no PostgreSQL semanalmente
# ============================================================
